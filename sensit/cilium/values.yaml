# Cilium Helm Values
# This file contains the configuration for the Cilium CNI installation

# Enable IPv6 support
ipv6:
  enabled: true

enableIPv6Masquerade: true

# Replace kube-proxy with Cilium's eBPF implementation
kubeProxyReplacement: true

# Configure direct API server access (bypasses service IP for cilium components)
# This prevents chicken-and-egg issues on cluster restart
k8sServiceHost: fdde:5353:4242:210::20
k8sServicePort: 6443

# Gateway API configuration
gatewayAPI:
  enabled: true
  # Using LoadBalancer services instead of hostNetwork
  # This allows both IPv4 and IPv6 gateways to use the same port (80)
  hostNetwork:
    enabled: false

# Envoy configuration - add NET_BIND_SERVICE capability for port 80 binding
envoy:
  securityContext:
    capabilities:
      # keepCapNetBindService allows envoy to bind to privileged ports (<1024)
      # This is helpful when using hostNetwork mode with Gateway API on port 80
      keepCapNetBindService: true
